<div class="content-body sm:w-[80vw]">
    <app-page-header title="Disciplinas"></app-page-header>
    <div class="top-area-list">
        <input type="text" pInputText (input)="applyFilter($event)" placeholder="Pesquise a disciplina por nome...">
        <p-button label="Cadastrar nova disciplina" [routerLink]="['./register']" icon="pi pi-plus"></p-button>
    </div>
    <p-table 
        #disciplinaTable
        [value]="listDisciplinas" 
        [paginator]="true"
        [styleClass]="'p-datatable-sm'"
        [rows]="5"
        [globalFilterFields]="['cdDisciplina', 'nmDisciplina']"
        >
        <ng-template #header>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Qtd. Professores</th>
                <th>Semestre</th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template #body let-disciplina>
            <tr>
                <td>{{ disciplina.cdDisciplina }}</td>
                <td>{{ disciplina.nmDisciplina }}</td>
                <td>{{ disciplina.professores?.length }}</td>
                <td>{{ disciplina.semestre }}</td>
                <td style="text-align: right;">
                    <p-button pTooltip="Visualizar" [routerLink]="['./' + disciplina.cdDisciplina + '/detail']" tooltipPosition="top" icon="pi pi-eye" [rounded]="true" [text]="true" />
                    <p-button pTooltip="Editar" [routerLink]="['./' + disciplina.cdDisciplina + '/edit']" tooltipPosition="top" icon="pi pi-pencil" [rounded]="true" [text]="true" />
                    <p-button pTooltip="Excluir" tooltipPosition="top" icon="pi pi-trash" [rounded]="true" [text]="true" (click)="confirmDeletion(disciplina)" />
                </td>
            </tr>
        </ng-template>
    </p-table>
    <div class="mt-4">
        <p-button pButton severity="secondary" label="Voltar" type="button" routerLink="/cursos"></p-button>
    </div>
</div>
<p-dialog header="Confirmar exclusão de usuário" [modal]="true" [(visible)]="viewModalConfirmDelete" [style]="{ width: '25rem' }">
    <div class="pb-5">
        <span>A disciplina {{ disciplinaToBeDeleted?.nmDisciplina }} será excluída do sistema. Você confirma esta exclusão?</span>
    </div>
    <div class="flex justify-end gap-2">
        <p-button label="Cancelar" severity="secondary" (click)="viewModalConfirmDelete = false" />
        <p-button label="Confirmar" severity="danger" (click)="deleteDisciplina()" />
    </div>
</p-dialog>
<router-outlet></router-outlet>